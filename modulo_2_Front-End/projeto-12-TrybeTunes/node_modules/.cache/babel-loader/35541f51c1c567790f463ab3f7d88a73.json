{"ast":null,"code":"var _jsxFileName = \"/home/luciano/projetos/projeto-14-TrybeTunes/sd-021-a-project-trybetunes/src/pages/ProfileEdit.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Carregando from '../components/Carregando';\nimport semImagem from '../images/semImagem.png';\nimport { getUser, updateUser } from '../services/userAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      image: '',\n      name: '',\n      disabled: true,\n      email: '',\n      description: '',\n      carregando: true\n    };\n\n    this.ableButton = () => {\n      const {\n        description,\n        email,\n        image,\n        name\n      } = this.state;\n      const regex = /\\S+@\\S+\\.\\S+/; // const testEmail = regex.test(email);\n      // if ( name.length > 0 && email.length > 0 && )\n\n      if (description && regex.test(email) && image && name) {\n        this.setState({\n          disabled: false\n        });\n      }\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState({\n        [name]: value\n      });\n      this.ableButton();\n    };\n\n    this.handleClick = event => {\n      event.preventDefault();\n      const {\n        history\n      } = this.props;\n      const {\n        description,\n        email,\n        image,\n        name\n      } = this.state;\n      updateUser({\n        description,\n        email,\n        image,\n        name\n      });\n      history.push('/profile');\n    };\n\n    this.perfil = () => {\n      const {\n        description,\n        email,\n        image,\n        name,\n        disabled\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: image || semImagem,\n            alt: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"NomeUsuario\",\n            children: [\"Nome\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"NomeUsuario\",\n              placeholder: \"Seu nome de perfil\",\n              \"data-testid\": \"edit-input-name\",\n              onChange: this.handleChange,\n              name: \"name\",\n              value: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"EmailUsuario\",\n            children: [\"Email\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"EmailUsuario\",\n              placeholder: \"Seu email de cadastro\",\n              \"data-testid\": \"edit-input-email\",\n              onChange: this.handleChange,\n              name: \"email\",\n              value: email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"DescricaolUsuario\",\n            children: [\"Descri\\xE7\\xE3o\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"DescricaolUsuario\",\n              placeholder: \"Uma breve descri\\xE7\\xE3o sobre voc\\xEA\",\n              \"data-testid\": \"edit-input-description\",\n              onChange: this.handleChange,\n              name: \"descricao\",\n              value: description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"FotoUsuario\",\n            children: [\"Imagem\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"FotoUsuario\",\n              placeholder: \"Sua foto de perfil\",\n              \"data-testid\": \"edit-input-image\",\n              onChange: this.handleChange,\n              name: \"image\",\n              value: image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            \"data-testid\": \"edit-button-save\",\n            disabled: disabled,\n            onClick: this.handleClick,\n            children: \"Salvar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this);\n    };\n  }\n\n  componentDidMount() {\n    getUser().then(_ref2 => {\n      let {\n        description,\n        email,\n        image,\n        name\n      } = _ref2;\n      const regex = /\\S+@\\S+\\.\\S+/;\n      const isNameEmail = regex.test(name);\n      this.setState({\n        carregando: false,\n        description,\n        email: !isNameEmail ? email : name,\n        image,\n        name: isNameEmail ? '' : name\n      });\n    });\n  }\n\n  componentDidUpdate() {\n    const {\n      disabled\n    } = this.state;\n\n    if (disabled) {\n      this.ableButton();\n    }\n  }\n\n  render() {\n    const {\n      carregando\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-profile-edit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: carregando ? /*#__PURE__*/_jsxDEV(Carregando, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 26\n        }, this) : this.perfil()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"ProfileEdit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.object\n}.isRequired;\nexport default ProfileEdit;","map":{"version":3,"sources":["/home/luciano/projetos/projeto-14-TrybeTunes/sd-021-a-project-trybetunes/src/pages/ProfileEdit.js"],"names":["React","PropTypes","Header","Carregando","semImagem","getUser","updateUser","ProfileEdit","Component","state","image","name","disabled","email","description","carregando","ableButton","regex","test","setState","handleChange","target","value","handleClick","event","preventDefault","history","props","push","perfil","componentDidMount","then","isNameEmail","componentDidUpdate","render","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Carregando from '../components/Carregando';\nimport semImagem from '../images/semImagem.png';\nimport { getUser, updateUser } from '../services/userAPI';\n\nclass ProfileEdit extends React.Component {\n  state = {\n    image: '',\n    name: '',\n    disabled: true,\n    email: '',\n    description: '',\n    carregando: true,\n  }\n\n  componentDidMount() {\n    getUser().then(({ description, email, image, name }) => {\n      const regex = /\\S+@\\S+\\.\\S+/;\n      const isNameEmail = regex.test(name);\n      this.setState({\n        carregando: false,\n        description,\n        email: !isNameEmail ? email : name,\n        image,\n        name: isNameEmail ? '' : name,\n      });\n    });\n  }\n\n  componentDidUpdate() {\n    const { disabled } = this.state;\n    if (disabled) {\n      this.ableButton();\n    }\n  }\n\n  ableButton = () => {\n    const { description, email, image, name } = this.state;\n    const regex = /\\S+@\\S+\\.\\S+/;\n    // const testEmail = regex.test(email);\n\n    // if ( name.length > 0 && email.length > 0 && )\n\n    if (description && regex.test(email) && image && name) {\n      this.setState({ disabled: false });\n    }\n  }\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState({\n      [name]: value,\n    });\n\n    this.ableButton();\n  }\n\n  handleClick = (event) => {\n    event.preventDefault();\n\n    const { history } = this.props;\n\n    const { description, email, image, name } = this.state;\n\n    updateUser({ description, email, image, name });\n\n    history.push('/profile');\n  }\n\n  perfil = () => {\n    const { description, email, image, name, disabled } = this.state;\n    return (\n      <form>\n        <div>\n          <img src={ image || semImagem } alt={ name } />\n        </div>\n        <div>\n          <label htmlFor=\"NomeUsuario\">\n            Nome\n            <input\n              type=\"text\"\n              id=\"NomeUsuario\"\n              placeholder=\"Seu nome de perfil\"\n              data-testid=\"edit-input-name\"\n              onChange={ this.handleChange }\n              name=\"name\"\n              value={ name }\n            />\n          </label>\n          <label htmlFor=\"EmailUsuario\">\n            Email\n            <input\n              type=\"text\"\n              id=\"EmailUsuario\"\n              placeholder=\"Seu email de cadastro\"\n              data-testid=\"edit-input-email\"\n              onChange={ this.handleChange }\n              name=\"email\"\n              value={ email }\n            />\n          </label>\n          <label htmlFor=\"DescricaolUsuario\">\n            Descrição\n            <textarea\n              id=\"DescricaolUsuario\"\n              placeholder=\"Uma breve descrição sobre você\"\n              data-testid=\"edit-input-description\"\n              onChange={ this.handleChange }\n              name=\"descricao\"\n              value={ description }\n            />\n          </label>\n          <label htmlFor=\"FotoUsuario\">\n            Imagem\n            <input\n              type=\"text\"\n              id=\"FotoUsuario\"\n              placeholder=\"Sua foto de perfil\"\n              data-testid=\"edit-input-image\"\n              onChange={ this.handleChange }\n              name=\"image\"\n              value={ image }\n            />\n          </label>\n        </div>\n        <div>\n          <button\n            type=\"submit\"\n            data-testid=\"edit-button-save\"\n            disabled={ disabled }\n            onClick={ this.handleClick }\n          >\n            Salvar\n          </button>\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { carregando } = this.state;\n    return (\n      <div data-testid=\"page-profile-edit\">\n        <div>\n          <Header />\n        </div>\n        <div>\n          { carregando ? <Carregando /> : this.perfil() }\n        </div>\n        <p>ProfileEdit</p>\n      </div>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.object,\n}.isRequired;\n\nexport default ProfileEdit;\n"]},"metadata":{},"sourceType":"module"}