{"ast":null,"code":"var _jsxFileName = \"/home/luciano/projetos/projeto-14-TrybeTunes/sd-021-a-project-trybetunes/src/pages/Search.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport Carregando from '../components/Carregando';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Search extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      disabled: true,\n      artistName: '',\n      carregando: false,\n      artistAlbuns: null\n    };\n\n    this.countName = _ref => {\n      let {\n        target: {\n          value\n        }\n      } = _ref;\n      const sizeMin = 2;\n      const artistName = value.map(name => name.charAt(0).toUpperCase() + name.slice(1));\n      this.setState({\n        artistName\n      });\n\n      if (value.length >= sizeMin) {\n        this.setState({\n          disabled: false\n        });\n        this.name = artistName;\n      }\n    };\n\n    this.handleSearch = () => {\n      const {\n        artistName\n      } = this.state;\n      this.setState({\n        carregando: true\n      });\n      searchAlbumsAPI(artistName).then(result => {\n        this.setState({\n          carregando: false,\n          artistAlbuns: result,\n          artistName: ''\n        });\n      });\n    };\n\n    this.renderAlbuns = () => {\n      const {\n        artistAlbuns\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"albuns-group\",\n        children: artistAlbuns.map(_ref2 => {\n          let {\n            collectionId,\n            artistName,\n            collectionName,\n            artworkUrl100\n          } = _ref2;\n          return /*#__PURE__*/_jsxDEV(Link, {\n            \"data-testid\": `link-to-album-${collectionId}`,\n            to: `/album/${collectionId}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: artworkUrl100,\n                alt: collectionName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: artistName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: collectionName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 57,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 17\n            }, this)\n          }, collectionId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.checkAlbuns = () => {\n      const {\n        name,\n        state: {\n          artistAlbuns\n        }\n      } = this;\n\n      if (artistAlbuns) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: `Resultado de álbuns de: ${name}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 11\n          }, this), artistAlbuns.length > 0 ? this.renderAlbuns() : /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Nenhum \\xE1lbum foi encontrado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true);\n      }\n    };\n  }\n\n  render() {\n    const {\n      disabled,\n      artistName,\n      carregando\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-search\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"BuscarNomeArtista\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          value: artistName,\n          \"data-testid\": \"search-artist-input\",\n          type: \"text\",\n          placeholder: \"Nome do artista\",\n          id: \"BuscarNomeArtista\",\n          className: \"BuscarNomeArtista\",\n          onChange: this.countName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"BotaoProcurarArtista\",\n        \"data-testid\": \"search-artist-button\",\n        disabled: disabled,\n        onClick: this.handleSearch,\n        children: \"Pesquisar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), carregando ? /*#__PURE__*/_jsxDEV(Carregando, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 24\n      }, this) : this.checkAlbuns(), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/home/luciano/projetos/projeto-14-TrybeTunes/sd-021-a-project-trybetunes/src/pages/Search.js"],"names":["React","Link","Header","Carregando","searchAlbumsAPI","Search","Component","state","disabled","artistName","carregando","artistAlbuns","countName","target","value","sizeMin","map","name","charAt","toUpperCase","slice","setState","length","handleSearch","then","result","renderAlbuns","collectionId","collectionName","artworkUrl100","checkAlbuns","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport Carregando from '../components/Carregando';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\n\nclass Search extends React.Component {\n  state = {\n    disabled: true,\n    artistName: '',\n    carregando: false,\n    artistAlbuns: null,\n  };\n\n  countName = ({ target: { value } }) => {\n    const sizeMin = 2;\n\n    const artistName = value.map((name) => name.charAt(0).toUpperCase() + name.slice(1));\n\n    this.setState({ artistName });\n\n    if (value.length >= sizeMin) {\n      this.setState({ disabled: false });\n      this.name = artistName;\n    }\n  }\n\n  handleSearch = () => {\n    const { artistName } = this.state;\n\n    this.setState({ carregando: true });\n\n    searchAlbumsAPI(artistName).then((result) => {\n      this.setState({\n        carregando: false,\n        artistAlbuns: result,\n        artistName: '',\n      });\n    });\n  }\n\n  renderAlbuns = () => {\n    const { artistAlbuns } = this.state;\n    return (\n      <section className=\"albuns-group\">\n        {\n          artistAlbuns\n            .map(({ collectionId, artistName, collectionName, artworkUrl100 }) => (\n              <Link\n                key={ collectionId }\n                data-testid={ `link-to-album-${collectionId}` }\n                to={ `/album/${collectionId}` }\n              >\n                <div>\n                  <img src={ artworkUrl100 } alt={ collectionName } />\n                  <h4>{artistName}</h4>\n                  <h5>{collectionName}</h5>\n                </div>\n              </Link>\n            ))\n        }\n\n      </section>\n    );\n  }\n\n  checkAlbuns = () => {\n    const { name, state: { artistAlbuns } } = this;\n    if (artistAlbuns) {\n      return (\n        <>\n          <h2>{`Resultado de álbuns de: ${name}`}</h2>\n          { artistAlbuns.length > 0\n            ? this.renderAlbuns()\n            : <h3>Nenhum álbum foi encontrado</h3> }\n        </>\n      );\n    }\n  }\n\n  render() {\n    const { disabled, artistName, carregando } = this.state;\n    return (\n      <div data-testid=\"page-search\">\n        <Header />\n        <label htmlFor=\"BuscarNomeArtista\">\n          <input\n            value={ artistName }\n            data-testid=\"search-artist-input\"\n            type=\"text\"\n            placeholder=\"Nome do artista\"\n            id=\"BuscarNomeArtista\"\n            className=\"BuscarNomeArtista\"\n            onChange={ this.countName }\n          />\n        </label>\n        <button\n          type=\"submit\"\n          className=\"BotaoProcurarArtista\"\n          data-testid=\"search-artist-button\"\n          disabled={ disabled }\n          onClick={ this.handleSearch }\n        >\n          Pesquisar\n        </button>\n        { carregando ? <Carregando /> : this.checkAlbuns() }\n        <p>Search</p>\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}