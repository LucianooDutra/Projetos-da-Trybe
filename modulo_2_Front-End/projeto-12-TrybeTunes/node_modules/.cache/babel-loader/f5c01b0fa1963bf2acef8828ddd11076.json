{"ast":null,"code":"var _jsxFileName = \"/home/luciano/projetos/projeto-14-TrybeTunes/sd-021-a-project-trybetunes/src/pages/ProfileEdit.js\";\nimport React from 'react'; // import PropTypes from 'prop-types';\n\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport Carregando from '../components/Carregando';\nimport semImagem from '../images/semImagem.png';\nimport { getUser, updateUser } from '../services/userAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      image: '',\n      name: '',\n      disabled: true,\n      email: '',\n      description: '',\n      carregando: false,\n      send: false\n    };\n\n    this.componentDidMount = async () => {\n      this.setState({\n        carregando: true\n      });\n      const userInfo = await getUser();\n      const {\n        name,\n        email,\n        description,\n        image\n      } = userInfo;\n      this.setState({\n        carregando: false,\n        name,\n        image,\n        description,\n        email\n      }, this.ableButton());\n    };\n\n    this.ableButton = () => {\n      const {\n        description,\n        email,\n        image,\n        name\n      } = this.state;\n      const regex = /\\S+@\\S+\\.\\S+/;\n      const testEmail = regex.test(email);\n\n      if (name.length > 0 && email.length > 0 && description.length > 0 && image.length > 0 && testEmail) {\n        this.setState({\n          disabled: false\n        });\n      } else {\n        this.setState({\n          disabled: true\n        });\n      }\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target: {\n          name,\n          value\n        }\n      } = _ref;\n      this.setState({\n        [name]: value\n      });\n      this.ableButton();\n    };\n\n    this.updateUserInfo = async () => {\n      // const { send } = this.state;\n      this.setState({\n        carregando: true\n      }, async () => {\n        const {\n          name,\n          email,\n          image,\n          description\n        } = this.state;\n        await updateUser({\n          name,\n          email,\n          image,\n          description\n        });\n        this.setState({\n          carregando: false,\n          send: true\n        }); // return () => this.state({ carregando: false, send: true });\n      }); // return () => this.state({ carregando: false, send: true });\n    };\n\n    this.redirecionar = () => {// const { send } = this.state;\n      // {}\n      // if (send) {\n      //   return <Redirect to=\"/profile\" />;\n      // }\n      // this.setState({ send: true });\n    };\n\n    this.perfil = () => {\n      const {\n        description,\n        email,\n        image,\n        name,\n        disabled\n      } = this.state;\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: image || semImagem,\n            alt: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"NomeUsuario\",\n            children: [\"Nome\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"NomeUsuario\",\n              placeholder: \"Seu nome de perfil\",\n              \"data-testid\": \"edit-input-name\",\n              onChange: this.handleChange,\n              name: \"name\",\n              value: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"EmailUsuario\",\n            children: [\"Email\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              id: \"EmailUsuario\",\n              placeholder: \"Seu email de cadastro\",\n              \"data-testid\": \"edit-input-email\",\n              onChange: this.handleChange,\n              name: \"email\",\n              value: email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"DescricaolUsuario\",\n            children: [\"Descri\\xE7\\xE3o\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"DescricaolUsuario\",\n              placeholder: \"Uma breve descri\\xE7\\xE3o sobre voc\\xEA\",\n              \"data-testid\": \"edit-input-description\",\n              onChange: this.handleChange,\n              name: \"description\",\n              value: description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"FotoUsuario\",\n            children: [\"Imagem\", /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"FotoUsuario\",\n              placeholder: \"Sua foto de perfil\",\n              \"data-testid\": \"edit-input-image\",\n              onChange: this.handleChange,\n              name: \"image\",\n              value: image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"data-testid\": \"edit-button-save\",\n            disabled: disabled,\n            onClick: this.updateUserInfo,\n            children: \"Salvar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }, this);\n    };\n  }\n\n  render() {\n    const {\n      carregando,\n      send\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-profile-edit\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [send && /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), carregando ? /*#__PURE__*/_jsxDEV(Carregando, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 26\n        }, this) : this.perfil()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"ProfileEdit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ProfileEdit;","map":{"version":3,"sources":["/home/luciano/projetos/projeto-14-TrybeTunes/sd-021-a-project-trybetunes/src/pages/ProfileEdit.js"],"names":["React","Redirect","Header","Carregando","semImagem","getUser","updateUser","ProfileEdit","Component","state","image","name","disabled","email","description","carregando","send","componentDidMount","setState","userInfo","ableButton","regex","testEmail","test","length","handleChange","target","value","updateUserInfo","redirecionar","perfil","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,qBAApC;;;AAEA,MAAMC,WAAN,SAA0BP,KAAK,CAACQ,SAAhC,CAA0C;AAAA;AAAA;AAAA,SACxCC,KADwC,GAChC;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,IAAI,EAAE,EAFA;AAGNC,MAAAA,QAAQ,EAAE,IAHJ;AAINC,MAAAA,KAAK,EAAE,EAJD;AAKNC,MAAAA,WAAW,EAAE,EALP;AAMNC,MAAAA,UAAU,EAAE,KANN;AAONC,MAAAA,IAAI,EAAE;AAPA,KADgC;;AAAA,SAWxCC,iBAXwC,GAWpB,YAAY;AAC9B,WAAKC,QAAL,CAAc;AAAEH,QAAAA,UAAU,EAAE;AAAd,OAAd;AACA,YAAMI,QAAQ,GAAG,MAAMd,OAAO,EAA9B;AACA,YAAM;AAAEM,QAAAA,IAAF;AAAQE,QAAAA,KAAR;AAAeC,QAAAA,WAAf;AAA4BJ,QAAAA;AAA5B,UAAsCS,QAA5C;AACA,WAAKD,QAAL,CAAc;AACZH,QAAAA,UAAU,EAAE,KADA;AAEZJ,QAAAA,IAFY;AAGZD,QAAAA,KAHY;AAIZI,QAAAA,WAJY;AAKZD,QAAAA;AALY,OAAd,EAMA,KAAKO,UAAL,EANA;AAOD,KAtBuC;;AAAA,SAwBxCA,UAxBwC,GAwB3B,MAAM;AACjB,YAAM;AAAEN,QAAAA,WAAF;AAAeD,QAAAA,KAAf;AAAsBH,QAAAA,KAAtB;AAA6BC,QAAAA;AAA7B,UAAsC,KAAKF,KAAjD;AACA,YAAMY,KAAK,GAAG,cAAd;AACA,YAAMC,SAAS,GAAGD,KAAK,CAACE,IAAN,CAAWV,KAAX,CAAlB;;AAEA,UAAIF,IAAI,CAACa,MAAL,GAAc,CAAd,IACCX,KAAK,CAACW,MAAN,GAAe,CADhB,IACqBV,WAAW,CAACU,MAAZ,GAAqB,CAD1C,IAC+Cd,KAAK,CAACc,MAAN,GAAe,CAD9D,IACmEF,SADvE,EACkF;AAChF,aAAKJ,QAAL,CAAc;AAAEN,UAAAA,QAAQ,EAAE;AAAZ,SAAd;AACD,OAHD,MAGO;AACL,aAAKM,QAAL,CAAc;AAAEN,UAAAA,QAAQ,EAAE;AAAZ,SAAd;AACD;AACF,KAnCuC;;AAAA,SAqCxCa,YArCwC,GAqCzB,QAAiC;AAAA,UAAhC;AAAEC,QAAAA,MAAM,EAAE;AAAEf,UAAAA,IAAF;AAAQgB,UAAAA;AAAR;AAAV,OAAgC;AAC9C,WAAKT,QAAL,CAAc;AACZ,SAACP,IAAD,GAAQgB;AADI,OAAd;AAIA,WAAKP,UAAL;AACD,KA3CuC;;AAAA,SA6CxCQ,cA7CwC,GA6CvB,YAAY;AAC3B;AACA,WAAKV,QAAL,CAAc;AAAEH,QAAAA,UAAU,EAAE;AAAd,OAAd,EAAoC,YAAY;AAC9C,cAAM;AAAEJ,UAAAA,IAAF;AAAQE,UAAAA,KAAR;AAAeH,UAAAA,KAAf;AAAsBI,UAAAA;AAAtB,YAAsC,KAAKL,KAAjD;AACA,cAAMH,UAAU,CAAC;AAAEK,UAAAA,IAAF;AAAQE,UAAAA,KAAR;AAAeH,UAAAA,KAAf;AAAsBI,UAAAA;AAAtB,SAAD,CAAhB;AACA,aAAKI,QAAL,CAAc;AAAEH,UAAAA,UAAU,EAAE,KAAd;AAAqBC,UAAAA,IAAI,EAAE;AAA3B,SAAd,EAH8C,CAI9C;AACD,OALD,EAF2B,CAQ3B;AACD,KAtDuC;;AAAA,SAwDxCa,YAxDwC,GAwDzB,MAAM,CACnB;AACA;AACA;AACA;AACA;AACA;AACD,KA/DuC;;AAAA,SAiExCC,MAjEwC,GAiE/B,MAAM;AACb,YAAM;AAAEhB,QAAAA,WAAF;AAAeD,QAAAA,KAAf;AAAsBH,QAAAA,KAAtB;AAA6BC,QAAAA,IAA7B;AAAmCC,QAAAA;AAAnC,UAAgD,KAAKH,KAA3D;AACA,0BACE;AAAA,gCACE;AAAA,iCACE;AAAK,YAAA,GAAG,EAAGC,KAAK,IAAIN,SAApB;AAAgC,YAAA,GAAG,EAAGO;AAAtC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE;AAAA,kCACE;AAAO,YAAA,OAAO,EAAC,aAAf;AAAA,4CAEE;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,EAAE,EAAC,aAFL;AAGE,cAAA,WAAW,EAAC,oBAHd;AAIE,6BAAY,iBAJd;AAKE,cAAA,QAAQ,EAAG,KAAKc,YALlB;AAME,cAAA,IAAI,EAAC,MANP;AAOE,cAAA,KAAK,EAAGd;AAPV;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAaE;AAAO,YAAA,OAAO,EAAC,cAAf;AAAA,6CAEE;AACE,cAAA,IAAI,EAAC,OADP;AAEE,cAAA,EAAE,EAAC,cAFL;AAGE,cAAA,WAAW,EAAC,uBAHd;AAIE,6BAAY,kBAJd;AAKE,cAAA,QAAQ,EAAG,KAAKc,YALlB;AAME,cAAA,IAAI,EAAC,OANP;AAOE,cAAA,KAAK,EAAGZ;AAPV;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF,eAyBE;AAAO,YAAA,OAAO,EAAC,mBAAf;AAAA,uDAEE;AACE,cAAA,EAAE,EAAC,mBADL;AAEE,cAAA,WAAW,EAAC,yCAFd;AAGE,6BAAY,wBAHd;AAIE,cAAA,QAAQ,EAAG,KAAKY,YAJlB;AAKE,cAAA,IAAI,EAAC,aALP;AAME,cAAA,KAAK,EAAGX;AANV;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAzBF,eAoCE;AAAO,YAAA,OAAO,EAAC,aAAf;AAAA,8CAEE;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,EAAE,EAAC,aAFL;AAGE,cAAA,WAAW,EAAC,oBAHd;AAIE,6BAAY,kBAJd;AAKE,cAAA,QAAQ,EAAG,KAAKW,YALlB;AAME,cAAA,IAAI,EAAC,OANP;AAOE,cAAA,KAAK,EAAGf;AAPV;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBApCF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,eAqDE;AAAA,iCACE;AACE,YAAA,IAAI,EAAC,QADP;AAEE,2BAAY,kBAFd;AAGE,YAAA,QAAQ,EAAGE,QAHb;AAIE,YAAA,OAAO,EAAG,KAAKgB,cAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBArDF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAkED,KArIuC;AAAA;;AAuIxCG,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEhB,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAAuB,KAAKP,KAAlC;AACA,wBACE;AAAK,qBAAY,mBAAjB;AAAA,8BACE;AAAA,+BACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAA,mBACIO,IAAI,iBAAI,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBADZ,EAEID,UAAU,gBAAG,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,gBAAH,GAAoB,KAAKe,MAAL,EAFlC;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAYD;;AArJuC;;AAwJ1C,eAAevB,WAAf","sourcesContent":["import React from 'react';\n// import PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport Carregando from '../components/Carregando';\nimport semImagem from '../images/semImagem.png';\nimport { getUser, updateUser } from '../services/userAPI';\n\nclass ProfileEdit extends React.Component {\n  state = {\n    image: '',\n    name: '',\n    disabled: true,\n    email: '',\n    description: '',\n    carregando: false,\n    send: false,\n  }\n\n  componentDidMount = async () => {\n    this.setState({ carregando: true });\n    const userInfo = await getUser();\n    const { name, email, description, image } = userInfo;\n    this.setState({\n      carregando: false,\n      name,\n      image,\n      description,\n      email },\n    this.ableButton());\n  }\n\n  ableButton = () => {\n    const { description, email, image, name } = this.state;\n    const regex = /\\S+@\\S+\\.\\S+/;\n    const testEmail = regex.test(email);\n\n    if (name.length > 0\n      && email.length > 0 && description.length > 0 && image.length > 0 && testEmail) {\n      this.setState({ disabled: false });\n    } else {\n      this.setState({ disabled: true });\n    }\n  }\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState({\n      [name]: value,\n    });\n\n    this.ableButton();\n  }\n\n  updateUserInfo = async () => {\n    // const { send } = this.state;\n    this.setState({ carregando: true }, async () => {\n      const { name, email, image, description } = this.state;\n      await updateUser({ name, email, image, description });\n      this.setState({ carregando: false, send: true });\n      // return () => this.state({ carregando: false, send: true });\n    });\n    // return () => this.state({ carregando: false, send: true });\n  }\n\n  redirecionar = () => {\n    // const { send } = this.state;\n    // {}\n    // if (send) {\n    //   return <Redirect to=\"/profile\" />;\n    // }\n    // this.setState({ send: true });\n  }\n\n  perfil = () => {\n    const { description, email, image, name, disabled } = this.state;\n    return (\n      <form>\n        <div>\n          <img src={ image || semImagem } alt={ name } />\n        </div>\n        <div>\n          <label htmlFor=\"NomeUsuario\">\n            Nome\n            <input\n              type=\"text\"\n              id=\"NomeUsuario\"\n              placeholder=\"Seu nome de perfil\"\n              data-testid=\"edit-input-name\"\n              onChange={ this.handleChange }\n              name=\"name\"\n              value={ name }\n            />\n          </label>\n          <label htmlFor=\"EmailUsuario\">\n            Email\n            <input\n              type=\"email\"\n              id=\"EmailUsuario\"\n              placeholder=\"Seu email de cadastro\"\n              data-testid=\"edit-input-email\"\n              onChange={ this.handleChange }\n              name=\"email\"\n              value={ email }\n            />\n          </label>\n          <label htmlFor=\"DescricaolUsuario\">\n            Descrição\n            <textarea\n              id=\"DescricaolUsuario\"\n              placeholder=\"Uma breve descrição sobre você\"\n              data-testid=\"edit-input-description\"\n              onChange={ this.handleChange }\n              name=\"description\"\n              value={ description }\n            />\n          </label>\n          <label htmlFor=\"FotoUsuario\">\n            Imagem\n            <input\n              type=\"text\"\n              id=\"FotoUsuario\"\n              placeholder=\"Sua foto de perfil\"\n              data-testid=\"edit-input-image\"\n              onChange={ this.handleChange }\n              name=\"image\"\n              value={ image }\n            />\n          </label>\n        </div>\n        <div>\n          <button\n            type=\"button\"\n            data-testid=\"edit-button-save\"\n            disabled={ disabled }\n            onClick={ this.updateUserInfo }\n          >\n            Salvar\n          </button>\n        </div>\n      </form>\n    );\n  }\n\n  render() {\n    const { carregando, send } = this.state;\n    return (\n      <div data-testid=\"page-profile-edit\">\n        <div>\n          <Header />\n        </div>\n        <div>\n          { send && <Redirect to=\"/profile\" /> }\n          { carregando ? <Carregando /> : this.perfil() }\n        </div>\n        <p>ProfileEdit</p>\n      </div>\n    );\n  }\n}\n\nexport default ProfileEdit;\n"]},"metadata":{},"sourceType":"module"}